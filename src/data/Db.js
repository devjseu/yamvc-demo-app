// Generated by CoffeeScript 1.6.3
(function() {
  var Db, app, yamvc,
    __slice = [].slice;

  app = window.app || {};

  app.data = app.data || {};

  yamvc = window.yamvc;

  Db = yamvc.Core.extend(function() {
    var all;
    all = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    yamvc.Core.apply(this, all);
    return this;
  });

  Db.prototype.init = function() {
    var all, config, opts;
    all = 1 <= arguments.length ? __slice.call(arguments, 0) : [];
    yamvc.Core.prototype.init.apply(this, all);
    opts = all[0] || {};
    config = opts.config || {};
    this.set('initOpts', opts);
    this.set('config', config);
    this.initConfig();
    if (!this.getName) {
      throw new Error('Database name should be set');
    }
  };

  Db.prototype.connect = function() {
    if (!this.get('connect')) {
      this.set('connect', new ydn.db.Storage(this.getName(), this.getSchema()));
    }
    return this;
  };

  Db.prototype.close = function() {
    this.getConnection().close();
    this.set('connect', null);
    return this;
  };

  Db.prototype.getConnection = function() {
    if (!this.get('connect')) {
      this.connect();
    }
    return this.get('connect');
  };

  Db.prototype.clear = function() {
    return this.getConnection().clear();
  };

  app.data.Db = Db;

  window.app = app;

}).call(this);

/*
//@ sourceMappingURL=Db.map
*/
