/*! culturalMe v1.0.0 - 2013-12-16 
 *  License:  */
(function(){var t,e,n,i=[].slice;e=window.app||{},e.data=e.data||{},n=window.yamvc,t=n.Core.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.Core.apply(this,t),this}),t.prototype.init=function(){var t,e,a;if(t=arguments.length>=1?i.call(arguments,0):[],n.Core.prototype.init.apply(this,t),a=t[0]||{},e=a.config||{},this.set("initOpts",a),this.set("config",e),this.initConfig(),!this.getName)throw Error("Database name should be set")},t.prototype.connect=function(){return this.get("connect")||this.set("connect",new ydn.db.Storage(this.getName(),this.getSchema())),this},t.prototype.close=function(){return this.getConnection().close(),this.set("connect",null),this},t.prototype.getConnection=function(){return this.get("connect")||this.connect(),this.get("connect")},t.prototype.clear=function(){return this.getConnection().clear()},e.data.Db=t,window.app=e}).call(this),function(){var t,e,n,i=[].slice;e=window.app||{},e.data=e.data||{},e.data.proxy=e.data.proxy||{},n=window.yamvc,t=n.Core.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.Core.apply(this,t),this}),t.prototype.init=function(){var t,e,n;return t=arguments.length>=1?i.call(arguments,0):[],n=t[0]||{},e=n.config||{},e.idProperty="id",this.set("initOpts",n),this.set("config",e),this.initConfig(),this},t.prototype.getStatus=function(){return this.get("status")},t.prototype.getResponse=function(){return this.get("response")},t.prototype.read=function(t,e,n){var i,a,o;return a=this.getIdProperty(),"object"==typeof e[a]&&console.log(a),i=this.set.bind(this),o=this.getDb().getConnection().get(t,e[a]),o.done(function(t){return i("status","success"),e[a]=t,i("response",e),n()}),o.fail(function(t){return i("status","error"),i("response",t),n()}),this},t.prototype.create=function(t,e,n){var i,a,o;return i=this.set.bind(this),a=this.getIdProperty(),o=this.getDb().getConnection().put({name:t,keyPath:a},e),o.done(function(t){return i("status","success"),e[a]=t,i("response",e),n()}),o.fail(function(t){return i("status","error"),i("response",t),n()}),this},t.prototype.update=function(t,e,n){var i,a;return i=this.set.bind(this),a=this.getDb().getConnection().put(t,e),a.done(function(){return i("status","success"),i("response",e),n()}),a.fail(function(t){return i("status","error"),i("response",t),n()}),this},t.prototype.destroy=function(t,e,n){var i,a,o;return a=this.getIdProperty(),"object"==typeof e[a]&&console.log(a),i=this.set.bind(this),o=this.getDb().getConnection().remove(t,e[a]),o.done(function(){return i("status","success"),i("response",{}),n()}),o.fail(function(t){return i("status","error"),i("response",t),n()}),this},e.data.proxy.YdnDb=t,window.app=e}.call(this),function(){var t,e;t=window.app||{},e=window.yamvc,t.init=function(){return t.layout=new t.views.Layout({config:{autoCreate:!0,tpl:"tpl-layout",renderTo:"#container"}}),t.controlles={main:new e.Controller({config:{name:"Main",views:{layout:t.layout},events:{$layout:{render:function(){return setTimeout(function(){return t.mask.hide()},500)}}}}})},this},window.app=t,e.onReady(t.init)}.call(this),function(){var t,e,n,i=[].slice;e=window.app||{},e.models=e.models||{},n=window.yamvc,t=n.Model.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.Model.apply(this,t),this}),t.prototype.init=function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.Model.prototype.init.apply(this,t)},t.prototype.initConfig=function(){var t,e;return t=arguments.length>=1?i.call(arguments,0):[],e=this.get("config"),e.namespace="balance",n.Model.prototype.initConfig.apply(this,t)},t.prototype.setRange=function(){},t.prototype.load=function(){var t;t=arguments.length>=1?i.call(arguments,0):[]},t.prototype.recaulculate=function(){var t;t=arguments.length>=1?i.call(arguments,0):[]},t.prototype.all=function(){var t;t=arguments.length>=1?i.call(arguments,0):[]},t.prototype.getBalance=function(){var t;t=arguments.length>=1?i.call(arguments,0):[]},e.models.balance=new t,window.app=e}.call(this),function(){var t,e,n,i=[].slice;e=window.app||{},e.models=e.models||{},n=window.yamvc,t=n.Model.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.Model.apply(this,t),this}),t.prototype.init=function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.Model.prototype.init.apply(this,t)},t.prototype.initConfig=function(){var t,e;return t=arguments.length>=1?i.call(arguments,0):[],e=this.get("config"),e.namespace="incomes",n.Model.prototype.initConfig.apply(this,t)},e.models.Incomes=t,window.app=e}.call(this),function(){var t,e,n,i=[].slice;e=window.app||{},e.views=e.views||{},n=window.yamvc,t=n.View.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.View.apply(this,t),this}),t.prototype.init=function(){var t,a;return t=arguments.length>=1?i.call(arguments,0):[],n.View.prototype.init.apply(this,t),a=this.get("config"),a.views={buttonExpense:new e.views.Button({config:{tpl:"tpl-button",renderTo:".add-expense",models:{locale:new n.Model({config:{namespace:"locale"},data:{text:"Add Expense"}})}}}),buttonIncome:new e.views.Button({config:{tpl:"tpl-button",renderTo:".add-income",models:{locale:new n.Model({config:{namespace:"locale"},data:{text:"Add Income"}})}}})},console.log(a)},e.views.Bar=t,window.app=e}.call(this),function(){var t,e,n,i=[].slice;e=window.app||{},e.views=e.views||{},n=window.yamvc,t=n.View.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.View.apply(this,t),this}),t.prototype.init=function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.View.prototype.init.apply(this,t),this.bindEvents(),this},t.prototype.bindEvents=function(){return this.addListener("render",this.bindElements.bind(this)),this.addListener("render",this.ajustBarsWidth.bind(this)),this.addListener("modelResourcesChange",this.updateBalance.bind(this)),this.addListener("modelExpensesChange",this.updateBalance.bind(this)),this},t.prototype.bindElements=function(){return this.set("$resources",this.queryEl(".bar-balance-resources")),this.set("$expenses",this.queryEl(".bar-balance-expenses")),this},t.prototype.updateBalance=function(){return this.recalculateModel(),this.partialRender(".bar-balance-resources"),this.partialRender(".bar-balance-expenses"),this.partialRender(".bar-balance-current"),this.ajustBarsWidth(),this},t.prototype.ajustBarsWidth=function(){var t,e,n,i,a,o;return t=this.getModel("balance").$get("expenses"),i=this.getModel("balance").$get("resources"),0===t&&0===i?(n=0,o=100,e=0,a=0):t>=i?(n=100,o=0,e=0,a=0):(n=0===t?0:parseInt(t/(i/100)),o=100-n,e=0,a=n),this.get("$resources").style.width=o+"%",this.get("$resources").style.left=a+"%",this.get("$expenses").style.width=n+"%",this.get("$expenses").style.left=e+"%"},t.prototype.recalculateModel=function(){return this.getModel("balance").calculateBalance()},e.views.BarBalance=t,window.app=e}.call(this),function(){var t,e,n,i=[].slice;e=window.app||{},e.views=e.views||{},n=window.yamvc,t=n.View.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.View.apply(this,t),this}),e.views.Button=t,window.app=e}.call(this),function(){var t,e,n,i=[].slice;e=window.app||{},e.views=e.views||{},n=window.yamvc,t=n.View.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.View.apply(this,t),this}),t.prototype.init=function(){var t,a;return t=arguments.length>=1?i.call(arguments,0):[],n.View.prototype.init.apply(this,t),a=this.get("config"),a.views={barBalance:new e.views.BarBalance({config:{id:"current-balance",tpl:"tpl-bar-balance",renderTo:".balance-container",models:{locale:new n.Model({config:{namespace:"locale"},data:{legend:"Legend",expenses:"expenses",resources:"resources",currentBalance:"Current balance"}}),balance:new n.Model({config:{namespace:"balance"},data:{resources:0,expenses:0,expectation:0}})}}}),barActions:new e.views.Bar({config:{id:"action-bar",tpl:"tpl-bar-action",renderTo:".layout-action-bar"}})}},e.views.Layout=t,window.app=e}.call(this),function(){var t,e,n,i=[].slice;e=window.app||{},e.views=e.views||{},n=window.yamvc,t=n.View.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.View.apply(this,t),this}),t.prototype.show=function(){var t;return t=this.get("el").style,t.display="table"},t.prototype.hide=function(){var t;return t=this.get("el").style,t.display="none"},e.views.Mask=t,window.app=e}.call(this),function(){var t,e,n,i=[].slice;e=window.app||{},e.views=e.views||{},n=window.yamvc,t=n.View.extend(function(){var t;return t=arguments.length>=1?i.call(arguments,0):[],n.View.apply(this,t),this}),t.prototype.init=function(){var t,a;return t=arguments.length>=1?i.call(arguments,0):[],n.View.prototype.init.apply(this,t),a=this.get("config"),a.views={buttonIncomes:new e.views.Button({config:{tpl:"tpl-button",renderTo:".",models:{locale:new n.Model({config:{namespace:"locale"},data:{text:"List all incomes"}})}}}),buttonExpenses:new e.views.Button({config:{tpl:"tpl-button",renderTo:".",models:{locale:new n.Model({config:{namespace:"locale"},data:{text:"List all expenses"}})}}})},console.log(a)},e.views.Bar=Bar,window.app=e}.call(this);
//@ sourceMappingURL=culturalMe-v1.0.0.min.js.map